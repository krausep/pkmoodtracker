
@{
    ViewBag.Title = "Moods";
}

@section scripts{
    <script src="~/Scripts/MoodClient.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', { 'packages': ['corechart'] });
        google.charts.setOnLoadCallback(drawChart);

        //function drawChart() {
        //    var data = google.visualization.arrayToDataTable([
        //      ['Year', 'Sales', 'Expenses'],
        //      ['2004', 1000, 400],
        //      ['2005', 1170, 460],
        //      ['2006', 660, 1120],
        //      ['2007', 1030, 540]
        //    ]);


        function drawChart() {
            var moodScales;
            $.get("/Mood/GetMoodScales")
                .done(function(data) {
                    moodScales = data;
                    console.log("Data Loaded: " + data);
                    var i = 0;
                    var myArray = new Array(['TimeThing', 'Moods']);
                    moodScales.forEach(function(m) {
                        console.log('mood scale ' + m.Scale + ', Date ' + m.CreatedDate);

                        
                        myArray.push([i++, m.Scale]);

                    });
                    var data = google.visualization.arrayToDataTable(myArray);

                    var options = {
                        title: 'Mood Tracker',
                        curveType: 'function',
                        legend: { position: 'bottom' }
                    };
                    var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

                    chart.draw(data, options);

        });

        //var data = google.visualization.arrayToDataTable([
        //  ['Year', 'Moods'],
        //  ['2004', 5],
        //  ['2005', 6],
        //  ['2006', 7],
        //  ['2007', 4]
        //]);
        }
    </script>
}


<h2>Moods</h2>

<div id="curve_chart" style="width: 900px; height: 500px"></div>
<div ng-app="MoodApp" class="container" ng-controller="MoodController">
    <br />
    <form ng-submit="addMood()">
        <div class="row">
            <div class="form-group">
                <div class="row">
                    <label for="moodText">Mood:</label>
                </div>
                <div class="row">
                    <input id="moodText" type="text" ng-model="newMood.mood" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group">
                <div class="row">
                    <label for="notesText">Notes:</label>
                </div>
                <div class="row">
                    <input id="notesText" type="text" ng-model="newMood.notes" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group">
                <div class="row">
                    <label for="scaleNumber">Scale of 1-10:</label>
                </div>
                <div class="row">
                    <input id="scaleNumber" type="number" ng-model="newMood.scale" />
                </div>
                <div class="row">
                    <input id="scaleRange" type="range" min="0" max="10" ng-model="newMood.scale" />
                </div>
            </div>
        </div>
        <div class="row">
            <input type="submit" value="Submit" id="submit" />
        </div>
    </form>
    <br />
    <div class="row">
        <input type="text" placeholder="Search Mood" ng-model="searchMood" />
    </div>
    <div class="row">
        <table class="table table-striped table-bordered">
            <thead class="thead">
                <tr>
                    <td>MoodId</td>
                    <td>Mood</td>
                    <td>Notes</td>
                    <td>Scale</td>
                    <td>Scale (num)</td>
                    <td>Date</td>
                    <td>Delete</td>
                </tr>
            </thead>
            <tbody class="table-hover">
                <tr ng-repeat="r in moods | filter : searchMood">
                    <td>{{r.MoodId}}</td>
                    <td>{{r.Mood}}</td>
                    <td>{{r.Notes}}</td>
                    <td><input type="range" min="0" max="10" value="{{r.Scale}}" /></td>'
                    <td>{{r.Scale}}</td>
                    <td>{{r.ModifiedDate.slice(6, -2) | date: 'EEE MMM dd, yyyy'}}</td>
                    <td><button class="fa fa-remove" aria-hidden="true" ng-click="deleteMood($index)"></button></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>




